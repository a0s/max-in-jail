# Max Messenger Android Setup Script

Автоматизированный bash-скрипт для установки и запуска мессенджера Max в Android эмуляторе на macOS.

## Возможности

- **Автоматическая установка всех зависимостей** через Homebrew
- Автоматическая установка Android SDK Command Line Tools
- Создание и управление Android Virtual Device (AVD)
- Автоматическое скачивание последней версии Max Messenger
- Установка и запуск приложения
- Сохранение данных между запусками
- **Идемпотентность** - скрипт можно запускать многократно без побочных эффектов
- **Модульная архитектура** - код разбит на логические модули

## Архитектура

### Структура проекта

```
max-in-box/
├── max-in-box.sh    # Основной скрипт
├── cleanup.sh       # Скрипт для удаления всех установленных файлов
├── README.md        # Документация
├── lib/             # Модули скрипта
│   ├── utils.sh           # Утилиты (логирование, проверки)
│   ├── dependencies.sh    # Управление зависимостями
│   ├── android_sdk.sh     # Работа с Android SDK
│   ├── avd.sh             # Управление AVD
│   ├── apk.sh             # Скачивание APK
│   └── app.sh             # Установка и запуск приложения
├── apk/             # Директория для скачанных APK файлов
└── setup.log        # Лог файл (создается автоматически)
```

### Модули

- **utils.sh** - Общие утилиты: логирование, проверка команд, работа с Homebrew, работа с файлами
- **dependencies.sh** - Автоматическая установка зависимостей (Homebrew, Java, Python 3)
- **android_sdk.sh** - Установка и настройка Android SDK Command Line Tools, установка компонентов SDK
- **avd.sh** - Создание и управление Android Virtual Device, запуск эмулятора, ожидание готовности
- **apk.sh** - Скачивание APK из различных источников (APKMirror, APKPure, Google Play через apkeep)
- **app.sh** - Установка приложения через ADB, запуск приложения

### Принципы

- **Идемпотентность**: Все функции проверяют состояние перед выполнением действий
- **Модульность**: Каждый модуль отвечает за свою область ответственности
- **Автоматизация**: Минимум ручных действий, все зависимости устанавливаются автоматически
- **Кроссплатформенность**: Автоматическое определение архитектуры (x86_64/arm64) для Apple Silicon
